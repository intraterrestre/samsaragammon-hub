<!DOCTYPE html><html lang="es"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Pitonisa Cantaora — Oráculo Nidánico</title>
<style>
  body{background:#000;color:#0f0;font-family:"Courier New",monospace;margin:0;min-height:100vh}
  .wrap{max-width:900px;margin:0 auto;padding:20px}
  h1{font-size:clamp(22px,4vw,36px);text-shadow:0 0 14px #0f0;margin:8px 0 14px}
  .card{background:rgba(0,25,0,.82);border:1px solid #0f0;border-radius:14px;padding:16px;margin:12px 0}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  select,button{width:100%;padding:12px;border-radius:10px;border:1px solid #0f0;background:#021; color:#0f0; font-weight:700}
  .out{display:grid;gap:10px;margin-top:12px}
  .pill{padding:10px;border-radius:10px;background:#010;border:1px solid #063}
  .title{color:#8f8;text-transform:uppercase;letter-spacing:.06em;margin-bottom:6px}
  .big{font-size:18px;line-height:1.5}
  .toolbar{display:flex;gap:10px;flex-wrap:wrap}
  .btn{background:#031;border:1px solid #0f0;border-radius:999px;padding:10px 16px;cursor:pointer}
</style>
</head><body><div class="wrap">
  <h1>🔮 Pitonisa Cantaora — Oráculo Nidánico</h1>
  <div class="card">
    <div class="row">
      <div><label>Reino de origen</label><select id="from"></select></div>
      <div><label>Reino de destino</label><select id="to"></select></div>
    </div>
    <div class="toolbar" style="margin-top:12px">
      <button class="btn" id="btnLeer">Cantar veredicto</button>
      <button class="btn" id="btnRuletaK">🎰 Ruleta kármica</button>
      <button class="btn" id="btnRuletaD">🌀 Ruleta dhármica</button>
    </div>
    <div class="out">
      <div class="pill"><div class="title">⚡ Riesgo kármico</div><div id="risk" class="big">—</div></div>
      <div class="pill"><div class="title">💎 Oportunidad dhármica</div><div id="opp" class="big">—</div></div>
      <div class="pill"><div class="title">💡 Estrategia curvista</div><div id="str" class="big">—</div></div>
      <div class="pill"><div class="title">🎯 Dificultad</div><div id="dif" class="big">—</div></div>
    </div>
  </div>
  <p style="opacity:.7">Tip: el Master selecciona origen/destino cuando el jugador cambia de color en el tablero. Pulsa “Cantar veredicto” para teatralizar la transición.</p>
</div>
<script>
// === Reinos (mismos ids que tu calculadora) ===
const REALMS = {
  god:{name:"DIOSES"}, titan:{name:"TITANES"}, human:{name:"HUMANOS"},
  animal:{name:"ANIMALES"}, ghost:{name:"ESPÍRITUS"}, hell:{name:"INFIERNO"}
};

// === Interacciones (pega aquí tu objeto 'karmicInteractions' existente) ===
const Data = /* pega tu objeto karmicInteractions aquí */ {};

// === UI ===
const $=id=>document.getElementById(id);
const f=$('from'), t=$('to');
Object.entries(REALMS).forEach(([k,v])=>{
  const o1=new Option(v.name,k); const o2=new Option(v.name,k);
  f.add(o1); t.add(o2);
});
f.value='human'; t.value='human';

function render(){
  const a=f.value,b=t.value;
  const it = Data?.[a]?.[b];
  if(!it){ $('risk').textContent='—';$('opp').textContent='—';$('str').textContent='—';$('dif').textContent='—'; return; }
  $('risk').textContent = it.risk;
  $('opp').textContent  = it.opportunity;
  $('str').textContent  = it.strategy;
  $('dif').textContent  = String(it.difficulty);
}
f.onchange=render; t.onchange=render; render();

// === Voz (Web Speech API nativa) ===
function speak(txt){
  const u=new SpeechSynthesisUtterance(txt);
  u.lang='es-ES'; u.rate=0.95; u.pitch=1.02; u.volume=1;
  speechSynthesis.cancel(); speechSynthesis.speak(u);
}
$('btnLeer').onclick=()=>{
  const a=f.value,b=t.value; const A=REALMS[a].name, B=REALMS[b].name;
  const risk=$('risk').textContent; const opp=$('opp').textContent;
  const line = `Has dejado ${A}. Entras en ${B}. Atención: ${risk}. Oportunidad: ${opp}. Decide con sabiduría.`;
  speak(line);
};

// Ganchos mínimos a tus ruletas actuales (abre en nueva pestaña)
$('btnRuletaK').onclick=()=>window.open('https://karmalab-samsara.netlify.app/?open=karma','_blank');
$('btnRuletaD').onclick=()=>window.open('https://karmalab-samsara.netlify.app/?open=dharma','_blank');
</script>
</body></html>