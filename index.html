<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ðŸš¨ Ambulancia de Juegosâ„¢ â€” Galenos del Nirvana Proâ„¢</title>
  <meta name="theme-color" content="#00ff7b" />
  <meta name="description" content="Llamado de emergencia lÃºdica. Los Galenos del Nirvana Proâ„¢ llegan para resucitar tus juegos de mesa medio muertos con voz, sabidurÃ­a y energÃ­a espiritual." />
  <style>
    :root{
      --green:#00ff7b; --accent:#ffd166; --line:#113c2d;
      --panel:#06130f; --panel2:#0a1d17; --text:#eafff5;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      background:#000; color:var(--text);
      font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      line-height:1.55; overflow-x:hidden;
    }
    .wrap{max-width:1100px; margin:0 auto; padding:20px 16px}

    /* HERO */
    .hero{margin-top:4vh;text-align:center;padding:22px 16px;border:1px solid var(--line);
      border-radius:16px;background:var(--panel);
      box-shadow:0 0 38px rgba(0,255,150,.08),inset 0 0 22px rgba(0,255,140,.04)}
    .title{font-size:clamp(28px,4vw,44px);font-weight:900;letter-spacing:.04em;
      color:var(--green);text-shadow:0 0 16px rgba(0,255,150,.35)}
    .subtitle{margin-top:8px;color:#cfe;opacity:.95;font-size:clamp(14px,1.9vw,18px)}
    .cta-bar{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin-top:16px}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:12px 18px;border-radius:999px;border:1px solid var(--green);
      background:linear-gradient(180deg,#02140f,#031b14);color:var(--green);
      text-decoration:none;font-weight:800;letter-spacing:.02em;cursor:pointer;
      box-shadow:0 0 10px var(--green),0 0 18px rgba(0,255,140,.45);
      transition:transform .12s ease, box-shadow .2s ease}
    .btn:hover{transform:translateY(-1px);box-shadow:0 0 16px var(--green),0 0 32px rgba(0,255,140,.55)}
    .btn.alt{border-color:var(--accent);color:var(--accent);box-shadow:0 0 10px var(--accent),0 0 18px rgba(255,209,102,.45)}

    /* GRID doctores (placeholder) */
    .grid{display:grid;gap:20px;margin-top:28px}
    @media (min-width: 680px){ .grid{grid-template-columns: 1fr 1fr} }
    @media (min-width:1080px){ .grid{grid-template-columns: 1fr 1fr 1fr} }
    .card{background:var(--panel2);border:1px solid var(--line);border-radius:14px;padding:18px;text-align:left;
      box-shadow:0 0 20px rgba(0,255,150,.05), inset 0 0 10px rgba(0,255,140,.03);transition:transform .25s ease, box-shadow .25s ease}
    .card:hover{transform:translateY(-3px);box-shadow:0 0 28px rgba(0,255,150,.15)}
    .card h3{color:var(--green);margin-bottom:6px}
    .muted{color:#cfe;opacity:.9;margin-bottom:10px}
    .tags{color:#ffeb7b;font-weight:700}
    .card .btn{margin-top:10px}

    /* === SIRENA (depurada) === */
    #sirenaToggle{
      position:fixed; right:16px; bottom:18px; z-index:10000;
      background:#222; color:#ffaaaa; border:2px solid #ff6666;
      border-radius:999px; padding:10px 20px; font-weight:900; font-family:ui-sans-serif;
      cursor:pointer; box-shadow:0 0 20px rgba(255,60,60,.25); transition:all .2s ease;
    }
    #sirenaToggle:hover{ transform:scale(1.04); box-shadow:0 0 26px rgba(255,90,90,.35); }
    #sirenaToggle.is-on{ background:#550000; color:#ffaaaa; }

    #lucesEmergencia{ position:fixed; inset:0; pointer-events:none; z-index:9999; opacity:0; }
    #lucesEmergencia.active{ opacity:.55; animation:luces 1.05s infinite; }
    @keyframes luces{
      0%,100%{ box-shadow:inset 0 0 180vmax rgba(255,40,40,.30); }
      50%    { box-shadow:inset 0 0 180vmax rgba(40,120,255,.30); }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- HERO -->
    <header class="hero">
      <h1 class="title">ðŸš¨ Ambulancia de Juegosâ„¢ â€” Galenos del Nirvana Proâ„¢</h1>
      <p class="subtitle">
        Llamado de emergencia lÃºdica. Resucita tus juegos con voz, sabidurÃ­a y energÃ­a espiritual.
      </p>
      <div class="cta-bar">
        <a class="btn" href="dm-panel.html">ðŸ§  Abrir DM Panel PRO</a>
      </div>
    </header>

    <!-- ===== Busca tu juego (navega a dm-panel con ?game=) ===== -->
    <section class="card" style="max-width:720px;margin:16px auto;padding:14px;border:1px solid #113c2d;border-radius:12px;background:#06130f">
      <h2 style="color:#00ff7b;margin-bottom:8px">ðŸ§­ Busca tu juego</h2>
      <p class="muted" style="margin-bottom:8px">Elige tu juego y te llevamos a su sala de emergencia con audio y guÃ­a.</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap">
        <select id="gamePicker" style="flex:1;min-width:220px;background:#031b14;color:#eafff5;border:1px solid #113c2d;border-radius:10px;padding:10px">
          <option value="">(elige uno)</option>
          <option value="risk">Risk</option>
          <option value="monopoly">Monopoly</option>
          <option value="catan">Catan</option>
          <option value="dnd5e">D&D 5e</option>
          <option value="uno">UNO</option>
          <option value="chess">Ajedrez</option>
          <option value="magic">Magic: The Gathering</option>
          <option value="tencandles">Ten Candles</option>
          <option value="carcassonne">Carcassonne</option>
          <option value="trivial">Trivial Pursuit</option>
          <option value="clue">Clue / Cluedo</option>
          <option value="pictionary">Pictionary / Dixit</option>
        </select>
        <button id="goGame" class="btn">ðŸš‘ Ir al DM Panel</button>
      </div>
    </section>

    <!-- (AquÃ­ tu grid de doctores si quieres mostrar cards) -->
    <!-- <section class="grid"> ... </section> -->

  </div>

  <!-- === SIRENA (botÃ³n + audio + luces) === -->
  <button id="sirenaToggle" aria-pressed="false">ðŸš¨ SIRENA ON â€” Â¡Listo para despegar!</button>
  <audio id="sirenaAudio" src="audio/alarms/call-to-attention.mp3" loop preload="auto" playsinline></audio>
  <div id="lucesEmergencia" aria-hidden="true"></div>

  <!-- ===== Scripts ===== -->
  <script>
    // NavegaciÃ³n a dm-panel con ?game=
    (function(){
      const pick = document.getElementById('gamePicker');
      const go   = document.getElementById('goGame');
      if (go) go.addEventListener('click', ()=>{
        const g = (pick?.value||"").trim().toLowerCase();
        const url = new URL(location.origin + "/dm-panel.html");
        if (g) url.searchParams.set('game', g);
        url.searchParams.set('v', Date.now()); // cache-buster
        location.href = url.toString();
      });
    })();

    // Sirena depurada (no auto-reproduce; requiere primer tap)
    (function(){
      const btn   = document.getElementById('sirenaToggle');
      const audio = document.getElementById('sirenaAudio');
      const fx    = document.getElementById('lucesEmergencia');
      if (!btn || !audio) return;

      let unlocked = false;
      function unlock(){
        if (unlocked) return;
        const probe = new Audio();
        probe.play().catch(()=>{});
        unlocked = true;
      }
      window.addEventListener('pointerdown', unlock, {once:true});

      function setOn(on){
        btn.classList.toggle('is-on', on);
        btn.setAttribute('aria-pressed', on?'true':'false');
        fx.classList.toggle('active', on);
        btn.textContent = on ? 'â›” APAGAR SIRENA' : 'ðŸš¨ SIRENA ON â€” Â¡Listo para despegar!';
      }

      btn.addEventListener('click', ()=>{
        unlock();
        if (audio.paused){
          audio.currentTime = 0;
          audio.volume = 0.85;
          audio.play().then(()=> setOn(true)).catch(()=>{ /* bloqueado por navegador */ });
        } else {
          try{ audio.pause(); audio.currentTime = 0; }catch(_){}
          setOn(false);
        }
      });
    })();
  </script>
</body>
</html>