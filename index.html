<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Samsaragammon ‚Äî Portal Curvista</title>
  <meta name="description" content="Portal de entrada al universo Samsaragammon: Manual Curvista, Diccionario, Tabla de Reinos, Calculadora K√°rmica y acceso al juego." />
  <meta name="theme-color" content="#00ff7b" />
  <style>
    :root{
      --green:#00ff7b; --green-soft:#8affbf; --line:#113c2d;
      --panel:#06130f; --panel2:#0a1d17; --text:#eafff5;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      background:#000;color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      line-height:1.55; overflow-x:hidden;
    }
    .matrix-bg{position:fixed; inset:0; z-index:-1; opacity:.18; pointer-events:none}
    .wrap{max-width:1024px; margin:0 auto; padding:20px 16px}
    header.hero{
      margin-top:6vh; margin-bottom:20px; text-align:center;
      padding:18px; border:1px solid var(--line); border-radius:14px; background:var(--panel);
      box-shadow:0 0 38px rgba(0,255,150,.08), inset 0 0 22px rgba(0,255,140,.04);
    }
    .title{
      font-size:clamp(28px,4vw,44px);
      color:var(--green);
      text-shadow:0 0 10px var(--green), 0 0 24px rgba(0,255,150,.35);
      letter-spacing:.06em; font-weight:800; margin-bottom:6px;
    }
    .subtitle{color:var(--green-soft); opacity:.9; font-size:clamp(14px,1.8vw,16px)}

    .neon-bar{display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin:16px 0 4px}
    .btn-neon{
      --glow:0 0 10px var(--green), 0 0 18px rgba(0,255,140,.45);
      display:inline-flex; align-items:center; gap:8px; justify-content:center;
      padding:12px 18px; border-radius:999px; border:1px solid var(--green);
      background:linear-gradient(180deg, #02140f, #031b14);
      color:var(--green); text-decoration:none; font-weight:800; letter-spacing:.02em;
      box-shadow:var(--glow); transition:transform .12s ease, box-shadow .2s ease, background .2s ease;
    }
    .btn-neon:hover{ transform:translateY(-1px); box-shadow:0 0 16px var(--green), 0 0 32px rgba(0,255,140,.55)}
    .btn-neon.small{ padding:9px 14px; font-weight:700 }

    section.card{
      margin-top:18px; background:var(--panel2); border:1px solid var(--line); border-radius:14px; padding:16px;
    }
    h2.section{
      color:var(--green); font-size:clamp(18px,2.4vw,22px); margin-bottom:8px;
      text-shadow:0 0 10px rgba(0,255,150,.25);
    }
    p.muted{color:#bfeee0; opacity:.9}
    .media{display:flex; flex-direction:column; align-items:center; gap:12px; margin:14px 0;}
    .media img{
      width:100%; height:auto; max-width:880px; border-radius:14px;
      border:1px solid var(--line); background:#000;
      box-shadow:0 0 24px rgba(0,255,150,.06);
    }
    .moon{width:min(360px,58vw); border-radius:16px; background:transparent; border:none; box-shadow:none}
    footer{
      margin:28px 0 24px; text-align:center; color:#9edfc9; font-size:.95rem;
      border-top:1px solid var(--line); padding-top:14px;
    }
    footer .mini{opacity:.7; font-size:.9rem; margin-top:6px}
    .links{display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px}
    .links a{color:var(--green); text-decoration:none; border-bottom:1px dotted var(--green)}
    .links a:hover{opacity:.9}
    @media (min-width:900px){ .grid-2{display:grid; grid-template-columns:1.1fr .9fr; gap:16px} }

    /* Bot√≥n de sonido */
    #soundToggle{
      position:fixed; right:16px; top:16px; z-index:9999;
      background:#001100; color:#00ff7b; border:2px solid #00ff7b;
      border-radius:24px; padding:8px 12px; font-family:monospace; cursor:pointer;
      box-shadow:0 0 10px rgba(0,255,140,.35);
    }
  </style>
</head>
<body>
  <!-- Fondo Matrix -->
  <canvas class="matrix-bg" id="matrixBg" aria-hidden="true"></canvas>

  <!-- Bot√≥n sonido -->
  <button id="soundToggle" aria-pressed="false">üîá Activar sonido</button>

  <div class="wrap">
    <header class="hero">
      <div class="title">Samsaragammon ‚Äî Portal Curvista</div>
      <div class="subtitle">Entrada oficial al Manual, Diccionario, Tabla de Reinos, Calculadora K√°rmica y Juego.</div>
      <nav class="neon-bar" aria-label="Accesos r√°pidos">
        <a class="btn-neon" id="btnJugar" href="juego.html">üéÆ Entrar al juego</a>
        <a class="btn-neon" href="MANUAL-MATRIX/index.html">üìò Manual Curvista</a>
        <a class="btn-neon" href="diccionario/">üìö Diccionario</a>
        <a class="btn-neon" href="https://karmalab-samsara.netlify.app/" target="_blank" rel="noopener">üßÆ Calculadora K√°rmica</a>
      </nav>
    </header>

    <section class="card grid-2">
      <div>
        <h2 class="section">La Luna como portal</h2>
        <p class="muted">
          La luna que Buda se√±al√≥ no era un s√≠mbolo, sino una salida. Desde Dungeons &amp; Dragons atraviesa este portal
          y deja que el tablero se vuelva tu mandala: cada tirada, una elecci√≥n; cada elecci√≥n, un paso hacia el Nirvana.
        </p>
        <div class="neon-bar" style="justify-content:flex-start">
          <a class="btn-neon small" href="juego.html">‚ú® Iniciar sesi√≥n</a>
          <a class="btn-neon small" href="MANUAL-MATRIX/index.html">üîé C√≥mo se juega</a>
        </div>
      </div>
      <div class="media">
        <img class="moon" alt="Buda se√±alando la luna" src="https://federicogarcia.art/wp-content/uploads/2025/11/Buda-moon-Fake-World-1-1.png" />
      </div>
    </section>

    <section class="card">
      <h2 class="section">La rueda del Samsara como tablero</h2>
      <p class="muted">La rueda refleja tus elecciones. No es arte decorativo: es el espejo de tu camino.</p>
      <div class="media">
        <img alt="Obra del tablero Samsaragammon" src="https://federicogarcia.art/wp-content/uploads/2025/11/Samsara24-scaled.png" />
      </div>
    </section>

    <footer>
      ¬© 2025 Constantino y Federico Garc√≠a ‚Äî <em>Curvism instead cubism‚Ñ¢</em>. Todos los derechos los redondeamos con reserva.
      <div class="mini">The Singing Witchi (preview) ¬∑ La Pitonisa Cantaora (en preparaci√≥n).</div>
    </footer>
  </div>

  <!-- Audio (cumple autoplay policies) -->
  <audio id="ambientAudio" src="https://federicogarcia.art/wp-content/uploads/2025/10/china-green-tea-380502.mp3" loop preload="auto" playsinline></audio>
  <audio id="ritualAudio"  src="https://federicogarcia.art/wp-content/uploads/2025/10/ritual-l4d1c0m0.mp3" preload="auto" playsinline></audio>

  <script>
    // ===== Fondo Matrix =====
    (function(){
      const c=document.getElementById('matrixBg'),x=c.getContext('2d');
      function resize(){ c.width=innerWidth; c.height=innerHeight; }
      resize(); addEventListener('resize',resize);
      const chars='„Ç¢„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É©„ÉØ0123456789‚òØKARMADHARMA';
      const A=chars.split(''); const fs=14; let cols=Math.floor(c.width/fs);
      let drops=Array(cols).fill(1);
      setInterval(function(){
        if(cols!==Math.floor(c.width/fs)){ cols=Math.floor(c.width/fs); drops=Array(cols).fill(1); }
        x.fillStyle='rgba(0,0,0,0.06)'; x.fillRect(0,0,c.width,c.height);
        x.fillStyle='#00ff7b'; x.font=fs+'px monospace';
        for(let i=0;i<drops.length;i++){
          const t=A[(Math.random()*A.length)|0];
          x.fillText(t,i*fs,drops[i]*fs);
          if(drops[i]*fs>c.height && Math.random()>0.975) drops[i]=0;
          drops[i]++;
        }
      },33);
    })();

    // ===== Audio: desbloqueo por interacci√≥n + toggle =====
    (function(){
      const ambient = document.getElementById("ambientAudio");
      const ritual  = document.getElementById("ritualAudio");
      const toggle  = document.getElementById("soundToggle");
      let audioReady = false;

      function tryPlayAmbient(){
        ambient.volume = 0.55;
        ambient.play().then(()=>{
          audioReady = true;
          toggle.textContent = "üîä Silenciar";
          toggle.setAttribute("aria-pressed","true");
        }).catch(()=>{/* Autoplay bloqueado hasta interacci√≥n */});
      }

      // Primer gesto del usuario ‚Üí intenta reproducir
      window.addEventListener("pointerdown", function onFirst(){
        tryPlayAmbient();
        window.removeEventListener("pointerdown", onFirst);
      }, { once:true });

      // Bot√≥n activar/silenciar
      toggle.addEventListener("click", ()=>{
        if (!audioReady){
          tryPlayAmbient();
          return;
        }
        if (ambient.paused){
          ambient.play();
          toggle.textContent="üîä Silenciar";
          toggle.setAttribute("aria-pressed","true");
        } else {
          ambient.pause();
          toggle.textContent="üîá Activar sonido";
          toggle.setAttribute("aria-pressed","false");
        }
      });

      // Al entrar al juego: pausa ambiente y dispara ritual
      const btnJugar = document.getElementById("btnJugar");
      if(btnJugar){
        btnJugar.addEventListener("click", ()=>{
          if (!audioReady) tryPlayAmbient();
          if (!ambient.paused) ambient.pause();
          if (ritual){ ritual.currentTime = 0; ritual.volume = 0.7; ritual.play().catch(()=>{}); }
        });
      }
    })();
  </script>
</body>
</html>